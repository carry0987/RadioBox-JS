!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).RadioBox=t()}(this,(function(){"use strict";class e{constructor(e){Object.assign(this,e)}static version="2.2.4";static stylesheetId="utils-style";static replaceRule={from:".utils",to:".utils-"};static setStylesheetId(t){e.stylesheetId=t}static setReplaceRule(t,n){e.replaceRule.from=t,e.replaceRule.to=n}static getElem(e,t,n){if("string"!=typeof e)return e;let r=document;return null===t&&n?r=n:t&&t instanceof Node&&"querySelector"in t?r=t:n&&n instanceof Node&&"querySelector"in n&&(r=n),"all"===t?r.querySelectorAll(e):r.querySelector(e)}static createElem(e,t={},n=""){let r=document.createElement(e);for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&("textContent"===e||"innerText"===e?r.textContent=t[e]:r.setAttribute(e,t[e]));return n&&(r.textContent=n),r}static insertAfter(t,n){if("string"==typeof n){let t=e.createElem("div");t.innerHTML=n,(n=t.firstChild)||e.throwError("The new node (string) provided did not produce a valid DOM element.")}t.parentNode.insertBefore(n,t.nextSibling)}static insertBefore(t,n){if("string"==typeof n){let t=e.createElem("div");t.innerHTML=n,(n=t.firstChild)||e.throwError("The new node (string) provided did not produce a valid DOM element.")}t.parentNode.insertBefore(n,t)}static addClass(e,t){return e.classList.add(t),e}static removeClass(e,t){return e.classList.remove(t),e}static toggleClass(e,t){return e.classList.toggle(t),e}static hasClass(e,t){return e.classList.contains(t)}static isObject(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}static deepMerge(t,...n){if(!n.length)return t;const r=n.shift();if(r)for(const n in r)if(Object.prototype.hasOwnProperty.call(r,n)){const o=r[n],s=n;e.isObject(o)?(t[s]&&"object"==typeof t[s]||(t[s]={}),e.deepMerge(t[s],o)):t[s]=o}return e.deepMerge(t,...n)}static injectStylesheet(t,n=null){n=e.isEmpty(n)?"":n;let r=e.createElem("style");r.id=e.stylesheetId+n,r.textContent="",document.head.append(r);let o=r.sheet;for(let r in t)t.hasOwnProperty(r)&&e.compatInsertRule(o,r,e.buildRules(t[r]),n)}static buildRules(e){let t="";for(let[n,r]of Object.entries(e))n=n.replace(/([A-Z])/g,(e=>`-${e[0].toLowerCase()}`)),t+=`${n}:${r};`;return t}static compatInsertRule(t,n,r,o=null){o=e.isEmpty(o)?"":o;let s=n.replace(e.replaceRule.from,e.replaceRule.to+o);t.insertRule(s+"{"+r+"}",0)}static removeStylesheet(t=null){t=e.isEmpty(t)?"":t;let n=e.getElem("#"+e.stylesheetId+t);n&&n.parentNode.removeChild(n)}static isEmpty(e){return"number"!=typeof e&&(!e||"string"==typeof e&&0===e.length)}static createEvent(e,t,n){return new CustomEvent(e,{detail:t,...n})}static dispatchEvent(t,n=document,r,o){try{if("string"==typeof t){let s=e.createEvent(t,r,o);return n.dispatchEvent(s)}if(t instanceof Event)return n.dispatchEvent(t);e.throwError("Invalid event type")}catch(t){return e.reportError("Dispatch Event Error:",t),!1}}static addEventListener(...e){const[t,n,r,o]=e;t.addEventListener(n,r,o)}static removeEventListener(...e){const[t,n,r,o]=e;t.removeEventListener(n,r,o)}static generateRandom(e=8){return Math.random().toString(36).substring(2,2+e)}static setLocalValue(e,t,n=!0){n&&(t=JSON.stringify(t)),window.localStorage.setItem(e,t)}static getLocalValue(t,n=!0){let r=window.localStorage.getItem(t);if(n)try{r=JSON.parse(r)}catch(t){e.reportError("Error while parsing stored json value: ",t)}return r}static removeLocalValue(e){window.localStorage.removeItem(e)}static setSessionValue(e,t,n=!0){n&&(t=JSON.stringify(t)),window.sessionStorage.setItem(e,t)}static getSessionValue(t,n=!0){let r=window.sessionStorage.getItem(t);if(n)try{r=JSON.parse(r)}catch(t){e.reportError("Error while parsing stored json value: ",t)}return r}static removeSessionValue(e){window.sessionStorage.removeItem(e)}static setCookie(t,n,r){let o=encodeURIComponent(t)+"="+encodeURIComponent(n)+";";const s={expires:new Date(Date.now()+864e5),path:"/",secure:!1,sameSite:"Lax"};if((r=e.deepMerge({},s,r||{})).expires){let e="";e=r.expires instanceof Date?r.expires.toUTCString():new Date(String(r.expires)).toUTCString(),o+="expires="+e+";"}o+="path="+r.path+";",r.domain&&(o+="domain="+r.domain+";"),r.secure&&(o+="secure;"),o+="SameSite="+r.sameSite+";",document.cookie=o}static getCookie(e){const t=encodeURIComponent(e)+"=",n=document.cookie.split(";");for(let e=0;e<n.length;e++){let r=n[e];for(;" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return decodeURIComponent(r.substring(t.length,r.length))}return null}static deleteCookie(e){this.setCookie(e,"",{expires:new Date(0)})}static getUrlParameter(e,t=window.location.search){let n=new URLSearchParams(t).get(e);return null===n?null:decodeURIComponent(n)}static async doFetch(e){const{url:t,method:n="GET",headers:r={},body:o=null,beforeSend:s=null,success:i=null,error:a=null}=e;let l={method:n,mode:"cors",headers:r instanceof Headers?r:new Headers(r)};if(null!==o&&["PUT","POST","DELETE"].includes(n.toUpperCase())){let e=o;o instanceof FormData||(e=JSON.stringify(o),l.headers instanceof Headers||(l.headers=new Headers(l.headers)),l.headers.append("Content-Type","application/json")),l.body=e}let c=new Request(t,l);try{const e=await new Promise((e=>{s?.(),e(c)})),t=await fetch(e),n=await t.json();return i?.(n),n}catch(e){throw a?.(e),e}}static appendFormData(t,n=new FormData){const{data:r,parentKey:o=""}=t;if(null!==r&&"object"==typeof r)if(r instanceof Blob||r instanceof File){const e=o||"file";n.append(e,r)}else Object.keys(r).forEach((t=>{const s=r[t],i=o?`${o}[${t}]`:t;null!==s&&"object"==typeof s?e.appendFormData({data:s,parentKey:i},n):null!==s&&n.append(i,String(s))}));else null!==r&&n.append(o,r);return n}static encodeFormData(t,n=""){if(t instanceof FormData)return t;const r={data:t,parentKey:n};return e.appendFormData(r)}static async sendFormData(t){const{url:n,data:r,method:o="POST",success:s,errorCallback:i}=t,a={url:n,method:o,body:e.encodeFormData(r),success:e=>{s&&s(e)},error:e=>{i&&i(e)}};return e.doFetch(a).then((()=>!0)).catch((()=>!1))}static reportError(...e){console.error(...e)}static throwError(e){throw new Error(e)}}Object.defineProperty(e,"version",{writable:!1,configurable:!0}),e.setStylesheetId="radiobox-style",e.setReplaceRule(".radio-box",".radio-box-"),e.getTemplate=function(e){return`\n    <div class="radio-box radio-box-${e}">\n        <label class="radio-title"></label>\n    </div>\n    `},e.getChecked=function(){return this.ele.checked};let t=function(e){throw new Error(e)};class n{constructor(e,t={}){this.init(e,t,n.instance.length),n.instance.push(this),1===n.instance.length&&function(e,t=!1){!0===t?console.log("Data Type : "+typeof e,"\nValue : "+e):"boolean"!=typeof t?console.log(t):console.log(e)}("RadioBox is loaded, version:"+n.version)}get value(){let e=this.elements.find((e=>e.checked));return e?e.value:null}init(r,o,s){let i,a=e.getElem(r,"all");if(a.length<1&&t("Elements not found"),this.id=s,this.option=e.deepMerge({},n.defaultOption,o),this.elements=[],this.option?.styles&&Object.keys(this.option.styles).length>0){let t=e.deepMerge({},this.option.styles);e.injectStylesheet(t,this.id)}return this.onChange=(e,t)=>{this.option.onChange&&this.option.onChange(e,t)},a.forEach(((n,r)=>{if("radio"!==n.type&&t("Element must be radio"),n.hasAttribute("data-radiobox"))return;n.setAttribute("data-radiobox","true"),i||(i=n.name),n.name!==i&&t("All radioboxes must belong to the same group");let o=n.nextElementSibling,s=n?.title||n?.dataset?.radioTitle,l=this.option.bindLabel,c=!1;o&&"LABEL"===o.tagName&&(s=(()=>{if(!e.isEmpty(n.id)){if(o.htmlFor===n.id)return l=c=!0,!0;if(o.dataset?.radioFor===n.id)return!0}return!(!n.dataset?.radioId||o.dataset?.radioFor!==n.dataset?.radioId)||null})(),!0===s&&(s=o.textContent,o.parentNode.removeChild(o))),(this.option.checked&&n?.value===this.option.checked||r===this.option?.checked)&&(a.forEach((e=>e!==n&&(e.checked=!1,e.removeAttribute("checked")))),n.checked=!0,n.setAttribute("checked","checked"));let d=e.getTemplate(this.id),h=document.createElement("div");h.innerHTML=d.trim();let u=e.getElem("label",h),p=n.cloneNode(!0);!0===c&&(u.htmlFor=n.id),u.parentNode.insertBefore(p,u),n.parentNode.replaceChild(h.firstElementChild,n),null===s?u.parentNode.removeChild(u):(u.textContent=s,l&&(u.classList.add("radio-labeled"),u.addEventListener("click",(e=>{e.preventDefault(),p.click()})))),p.addEventListener("change",(e=>{const t=e.target.checked;this.elements.forEach((t=>{t!==e.target&&t.removeAttribute("checked")})),e.target.setAttribute("checked",t?"checked":""),this.onChange(e,p)})),this.elements.push(p)})),this.option.loaded&&this.option.loaded(this),this}empty(){return this.elements.forEach((e=>{e.checked=!1,e.removeAttribute("checked")})),this}destroy(){return this.elements.forEach((e=>{e.removeEventListener("change",this.onChange),e.removeEventListener("change",this.option.onChange)})),e.removeStylesheet(this.id),n.instance.splice(this.id,1),this}}return n.version="1.5.10",n.instance=[],n.defaultOption={checked:null,loaded:null,onChange:null,bindLabel:!0,styles:{}},n.destroyAll=()=>{n.instance.forEach(((e,t)=>{e.destroy()})),n.instance=[]},n}));
