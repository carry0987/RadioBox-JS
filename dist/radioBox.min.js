!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).RadioBox=t()}(this,(function(){"use strict";const e={getElem:(e,t,n)=>"object"==typeof e?e:void 0===t&&void 0===n?isNaN(1*e)?document.querySelector(e):document.getElementById(e):"all"===t||null===t?void 0===n?document.querySelectorAll(e):n.querySelectorAll(e):"object"==typeof t&&void 0===n?t.querySelector(e):void 0,isObject:e=>e&&"object"==typeof e&&!Array.isArray(e),deepMerge(t,...n){const o=n.shift();if(!o)return t;if(e.isObject(t)&&e.isObject(o))for(const n in o)e.isObject(o[n])?(t[n]||Object.assign(t,{[n]:{}}),e.deepMerge(t[n],o[n])):Object.assign(t,{[n]:o[n]});return e.deepMerge(t,...n)},injectStylesheet(t,n){let o=document.createElement("style");o.id="radiobox-style"+n,o.appendChild(document.createTextNode("")),document.head.appendChild(o);let i=document.styleSheets[document.styleSheets.length-1];for(let o in t)t.hasOwnProperty(o)&&e.compatInsertRule(i,o,e.buildRules(t[o]),n)},buildRules(e){let t="";for(let[n,o]of Object.entries(e))t+=`${n}:${o};`;return t},compatInsertRule(e,t,n,o){let i=t.replace(".radio-box",".radio-box-"+o);e.insertRule(i+"{"+n+"}",0)},removeStylesheet(t){let n=e.getElem("#radiobox-style"+t);n&&n.parentNode.removeChild(n)},isEmpty:e=>!e?.length,getTemplate:e=>`\n        <div class="radio-box radio-box-${e}">\n            <label class="radio-title"></label>\n        </div>\n        `,getChecked(){return this.ele.checked}};let t=function(e){throw new Error(e)};class n{constructor(e,t={}){this.init(e,t,n.instance.length),n.instance.push(this),1===n.instance.length&&function(e,t=!1){!0===t?console.log("Data Type : "+typeof e,"\nValue : "+e):"boolean"!=typeof t?console.log(t):console.log(e)}("RadioBox is loaded, version:"+n.version)}get value(){let e=this.elements.find((e=>e.checked));return e?e.value:null}init(o,i,l){let s,r=e.getElem(o,"all");if(r.length<1&&t("Elements not found"),this.id=l,this.option=e.deepMerge({},n.defaultOption,i),this.elements=[],this.option?.styles&&Object.keys(this.option.styles).length>0){let t=e.deepMerge({},this.option.styles);e.injectStylesheet(t,this.id)}return this.onChange=(e,t)=>{this.option.onChange&&this.option.onChange(e,t)},r.forEach(((n,o)=>{if("radio"!==n.type&&t("Element must be radio"),n.hasAttribute("data-radiobox"))return;n.setAttribute("data-radiobox","true"),s||(s=n.name),n.name!==s&&t("All radioboxes must belong to the same group");let i=n.nextElementSibling,l=n?.title||n?.dataset?.radioTitle,d=this.option.bindLabel,a=!1;i&&"LABEL"===i.tagName&&(l=(()=>{if(!e.isEmpty(n.id)){if(i.htmlFor===n.id)return d=a=!0,!0;if(i.dataset?.radioFor===n.id)return!0}return!(!n.dataset?.radioId||i.dataset?.radioFor!==n.dataset?.radioId)||null})(),!0===l&&(l=i.textContent,i.parentNode.removeChild(i))),(this.option.checked&&n?.value===this.option.checked||o===this.option?.checked)&&(r.forEach((e=>e!==n&&(e.checked=!1,e.removeAttribute("checked")))),n.checked=!0,n.setAttribute("checked","checked"));let c=e.getTemplate(this.id),h=document.createElement("div");h.innerHTML=c.trim();let u=e.getElem("label",h),m=n.cloneNode(!0);!0===a&&(u.htmlFor=n.id),u.parentNode.insertBefore(m,u),n.parentNode.replaceChild(h.firstElementChild,n),null===l?u.parentNode.removeChild(u):(u.textContent=l,d&&(u.classList.add("radio-labeled"),u.addEventListener("click",(e=>{e.preventDefault(),m.click()})))),m.addEventListener("change",(e=>{const t=e.target.checked;this.elements.forEach((t=>{t!==e.target&&t.removeAttribute("checked")})),e.target.setAttribute("checked",t?"checked":""),this.onChange(e,m)})),this.elements.push(m)})),this}empty(){return this.elements.forEach((e=>{e.checked=!1,e.removeAttribute("checked")})),this}destroy(){return this.elements.forEach((e=>{e.removeEventListener("change",this.onChange),e.removeEventListener("change",this.option.onChange)})),e.removeStylesheet(this.id),n.instance.splice(this.id,1),this}}return n.version="1.5.3",n.instance=[],n.defaultOption={checked:null,onChange:null,bindLabel:!0,styles:{}},n.destroyAll=()=>{n.instance.forEach(((e,t)=>{e.destroy()})),n.instance=[]},n}));
