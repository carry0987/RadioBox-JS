!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).RadioBox=t()}(this,(function(){"use strict";const e={getElem:(e,t,i)=>"object"==typeof e?e:void 0===t&&void 0===i?isNaN(1*e)?document.querySelector(e):document.getElementById(e):"all"===t||null===t?void 0===i?document.querySelectorAll(e):i.querySelectorAll(e):"object"==typeof t&&void 0===i?t.querySelector(e):void 0,isObject:e=>e&&"object"==typeof e&&!Array.isArray(e),deepMerge(t,...i){const o=i.shift();if(!o)return t;if(e.isObject(t)&&e.isObject(o))for(const i in o)e.isObject(o[i])?(t[i]||Object.assign(t,{[i]:{}}),e.deepMerge(t[i],o[i])):Object.assign(t,{[i]:o[i]});return e.deepMerge(t,...i)},injectStylesheet(t,i){let o=document.createElement("style");o.id="radiobox-style"+i,o.appendChild(document.createTextNode("")),document.head.appendChild(o);let n=o.sheet;for(let o in t)t.hasOwnProperty(o)&&e.compatInsertRule(n,o,e.buildRules(t[o]),i)},buildRules(e){let t="";for(let[i,o]of Object.entries(e))t+=`${i}:${o};`;return t},compatInsertRule(e,t,i,o){let n=t.replace(".radio-box",".radio-box-"+o);e.insertRule(n+"{"+i+"}",0)},removeStylesheet(t){let i=e.getElem("#radiobox-style"+t);i&&i.parentNode.removeChild(i)},isEmpty:e=>!e?.length,getTemplate:e=>`\n        <div class="radio-box radio-box-${e}">\n            <label class="radio-title"></label>\n        </div>\n        `,getChecked(){return this.ele.checked}};let t=function(e){throw new Error(e)};class i{constructor(e,t={}){this.init(e,t,i.instance.length),i.instance.push(this),1===i.instance.length&&function(e,t=!1){!0===t?console.log("Data Type : "+typeof e,"\nValue : "+e):"boolean"!=typeof t?console.log(t):console.log(e)}("RadioBox is loaded, version:"+i.version)}get value(){let e=this.elements.find((e=>e.checked));return e?e.value:null}init(o,n,l){let r,s=e.getElem(o,"all");if(s.length<1&&t("Elements not found"),this.id=l,this.option=e.deepMerge({},i.defaultOption,n),this.elements=[],this.option?.styles&&Object.keys(this.option.styles).length>0){let t=e.deepMerge({},this.option.styles);e.injectStylesheet(t,this.id)}return this.onChange=(e,t)=>{this.option.onChange&&this.option.onChange(e,t)},s.forEach(((i,o)=>{if("radio"!==i.type&&t("Element must be radio"),i.hasAttribute("data-radiobox"))return;i.setAttribute("data-radiobox","true"),r||(r=i.name),i.name!==r&&t("All radioboxes must belong to the same group");let n=i.nextElementSibling,l=i?.title||i?.dataset?.radioTitle,d=this.option.bindLabel,a=!1;n&&"LABEL"===n.tagName&&(l=(()=>{if(!e.isEmpty(i.id)){if(n.htmlFor===i.id)return d=a=!0,!0;if(n.dataset?.radioFor===i.id)return!0}return!(!i.dataset?.radioId||n.dataset?.radioFor!==i.dataset?.radioId)||null})(),!0===l&&(l=n.textContent,n.parentNode.removeChild(n))),(this.option.checked&&i?.value===this.option.checked||o===this.option?.checked)&&(s.forEach((e=>e!==i&&(e.checked=!1,e.removeAttribute("checked")))),i.checked=!0,i.setAttribute("checked","checked"));let c=e.getTemplate(this.id),h=document.createElement("div");h.innerHTML=c.trim();let u=e.getElem("label",h),p=i.cloneNode(!0);!0===a&&(u.htmlFor=i.id),u.parentNode.insertBefore(p,u),i.parentNode.replaceChild(h.firstElementChild,i),null===l?u.parentNode.removeChild(u):(u.textContent=l,d&&(u.classList.add("radio-labeled"),u.addEventListener("click",(e=>{e.preventDefault(),p.click()})))),p.addEventListener("change",(e=>{const t=e.target.checked;this.elements.forEach((t=>{t!==e.target&&t.removeAttribute("checked")})),e.target.setAttribute("checked",t?"checked":""),this.onChange(e,p)})),this.elements.push(p)})),this}empty(){return this.elements.forEach((e=>{e.checked=!1,e.removeAttribute("checked")})),this}destroy(){return this.elements.forEach((e=>{e.removeEventListener("change",this.onChange),e.removeEventListener("change",this.option.onChange)})),e.removeStylesheet(this.id),i.instance.splice(this.id,1),this}}return i.version="1.5.5",i.instance=[],i.defaultOption={checked:null,onChange:null,bindLabel:!0,styles:{}},i.destroyAll=()=>{i.instance.forEach(((e,t)=>{e.destroy()})),i.instance=[]},i}));
