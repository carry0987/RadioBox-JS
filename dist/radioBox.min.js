!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).RadioBox=t()}(this,(function(){"use strict";function e(e){throw new Error(e)}var t=Object.freeze({__proto__:null,reportError:function(...e){console.error(...e)},throwError:e});function n(e,t,n){if("string"!=typeof e)return e;let o=document;return null===t&&n?o=n:t&&t instanceof Node&&"querySelector"in t?o=t:n&&n instanceof Node&&"querySelector"in n&&(o=n),"all"===t?o.querySelectorAll(e):o.querySelector(e)}function o(e,t={},n=""){let o=document.createElement(e);for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&("textContent"===e||"innerText"===e?o.textContent=t[e]:o.setAttribute(e,t[e]));return n&&(o.textContent=n),o}var r=Object.freeze({__proto__:null,addClass:function(e,t){return e.classList.add(t),e},createElem:o,getElem:n,hasClass:function(e,t){return e.classList.contains(t)},insertAfter:function(t,n){if("string"==typeof n){let t=o("div");t.innerHTML=n,(n=t.firstChild)||e("The new node (string) provided did not produce a valid DOM element.")}t.parentNode.insertBefore(n,t.nextSibling)},insertBefore:function(t,n){if("string"==typeof n){let t=o("div");t.innerHTML=n,(n=t.firstChild)||e("The new node (string) provided did not produce a valid DOM element.")}t.parentNode.insertBefore(n,t)},removeClass:function(e,t){return e.classList.remove(t),e},toggleClass:function(e,t){return e.classList.toggle(t),e}});let i="utils-style";const l={from:".utils",to:".utils-"};function s(e,...t){if(!t.length)return e;const n=t.shift();if(n)for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const r=n[t],i=t;"object"!=typeof(o=r)||null===o||Array.isArray(o)?e[i]=r:(e[i]&&"object"==typeof e[i]||(e[i]={}),s(e[i],r))}var o;return s(e,...t)}function a(e){let t="";for(let[n,o]of Object.entries(e))n=n.replace(/([A-Z])/g,(e=>`-${e[0].toLowerCase()}`)),t+=`${n}:${o};`;return t}function d(e,t,n,o=null){o=c(o)?"":o;let r=t.replace(l.from,l.to+o);e.insertRule(r+"{"+n+"}",0)}function c(e){return"number"!=typeof e&&(!e||"string"==typeof e&&0===e.length)}var h,u;i="radiobox-style",h=".radio-box",u=".radio-box-",l.from=h,l.to=u;class f{constructor(e,t={}){this.init(e,t,f.instance.length),f.instance.push(this),1===f.instance.length&&function(e,t=!1){!0===t?console.log("Data Type : "+typeof e,"\nValue : "+e):"boolean"!=typeof t?console.log(t):console.log(e)}("RadioBox is loaded, version:"+f.version)}get value(){let e=this.elements.find((e=>e.checked));return e?e.value:null}init(e,n,l){let h,u=r.getElem(e,"all");if(u.length<1&&t.throwError("Elements not found"),this.id=l,this.option=s({},f.defaultOption,n),this.elements=[],this.option?.styles&&Object.keys(this.option.styles).length>0){!function(e,t=null){t=c(t)?"":t;let n=o("style");n.id=i+t,n.textContent="",document.head.append(n);let r=n.sheet;for(let n in e)e.hasOwnProperty(n)&&d(r,n,a(e[n]),t)}(s({},this.option.styles),this.id)}return this.onChange=(e,t)=>{this.option.onChange&&this.option.onChange(e,t)},u.forEach(((e,n)=>{if("radio"!==e.type&&t.throwError("Element must be radio"),e.hasAttribute("data-radiobox"))return;e.setAttribute("data-radiobox","true"),h||(h=e.name),e.name!==h&&t.throwError("All radioboxes must belong to the same group");let o=e.nextElementSibling,i=e?.title||e?.dataset?.radioTitle,l=this.option.bindLabel,s=!1;o&&"LABEL"===o.tagName&&(i=(()=>{if(!c(e.id)){if(o.htmlFor===e.id)return l=s=!0,!0;if(o.dataset?.radioFor===e.id)return!0}return!(!e.dataset?.radioId||o.dataset?.radioFor!==e.dataset?.radioId)||null})(),!0===i&&(i=o.textContent,o.parentNode.removeChild(o))),(this.option.checked&&e?.value===this.option.checked||n===this.option?.checked)&&(u.forEach((t=>t!==e&&(t.checked=!1,t.removeAttribute("checked")))),e.checked=!0,e.setAttribute("checked","checked"));let a=function(e){return`\n    <div class="radio-box radio-box-${e}">\n        <label class="radio-title"></label>\n    </div>\n    `}(this.id),d=document.createElement("div");d.innerHTML=a.trim();let f=r.getElem("label",d),p=e.cloneNode(!0);!0===s&&(f.htmlFor=e.id),f.parentNode.insertBefore(p,f),e.parentNode.replaceChild(d.firstElementChild,e),null===i?f.parentNode.removeChild(f):(f.textContent=i,l&&(f.classList.add("radio-labeled"),f.addEventListener("click",(e=>{e.preventDefault(),p.click()})))),p.addEventListener("change",(e=>{const t=e.target.checked;this.elements.forEach((t=>{t!==e.target&&t.removeAttribute("checked")})),e.target.setAttribute("checked",t?"checked":""),this.onChange(e,p)})),this.elements.push(p)})),this.option.loaded&&this.option.loaded(this),this}empty(){return this.elements.forEach((e=>{e.checked=!1,e.removeAttribute("checked")})),this}destroy(){return this.elements.forEach((e=>{e.removeEventListener("change",this.onChange),e.removeEventListener("change",this.option.onChange)})),function(e=null){e=c(e)?"":e;let t=n("#"+i+e);t&&t.parentNode.removeChild(t)}(this.id),f.instance.splice(this.id,1),this}}return f.version="1.5.11",f.instance=[],f.defaultOption={checked:null,loaded:null,onChange:null,bindLabel:!0,styles:{}},f.destroyAll=()=>{f.instance.forEach(((e,t)=>{e.destroy()})),f.instance=[]},f}));
