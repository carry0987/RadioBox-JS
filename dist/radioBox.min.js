!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).RadioBox=t()}(this,(function(){"use strict";const e={getElem:(e,t,o)=>"object"==typeof e?e:void 0===t&&void 0===o?isNaN(1*e)?document.querySelector(e):document.getElementById(e):"all"===t||null===t?void 0===o?document.querySelectorAll(e):o.querySelectorAll(e):"object"==typeof t&&void 0===o?t.querySelector(e):void 0,isObject:e=>e&&"object"==typeof e&&!Array.isArray(e),deepMerge(t,...o){const i=o.shift();if(!i)return t;if(e.isObject(t)&&e.isObject(i))for(const o in i)e.isObject(i[o])?(t[o]||Object.assign(t,{[o]:{}}),e.deepMerge(t[o],i[o])):Object.assign(t,{[o]:i[o]});return e.deepMerge(t,...o)},injectStylesheet(t,o){let i=document.createElement("style");i.id="radiobox-style"+o,i.appendChild(document.createTextNode("")),document.head.appendChild(i);let n=i.sheet;for(let i in t)t.hasOwnProperty(i)&&e.compatInsertRule(n,i,e.buildRules(t[i]),o)},buildRules(e){let t="";for(let[o,i]of Object.entries(e))o=o.replace(/([A-Z])/g,(e=>`-${e[0].toLowerCase()}`)),t+=`${o}:${i};`;return t},compatInsertRule(e,t,o,i){let n=t.replace(".radio-box",".radio-box-"+i);e.insertRule(n+"{"+o+"}",0)},removeStylesheet(t){let o=e.getElem("#radiobox-style"+t);o&&o.parentNode.removeChild(o)},isEmpty:e=>!e?.length,getTemplate:e=>`\n        <div class="radio-box radio-box-${e}">\n            <label class="radio-title"></label>\n        </div>\n        `,getChecked(){return this.ele.checked}};let t=function(e){throw new Error(e)};class o{constructor(e,t={}){this.init(e,t,o.instance.length),o.instance.push(this),1===o.instance.length&&function(e,t=!1){!0===t?console.log("Data Type : "+typeof e,"\nValue : "+e):"boolean"!=typeof t?console.log(t):console.log(e)}("RadioBox is loaded, version:"+o.version)}get value(){let e=this.elements.find((e=>e.checked));return e?e.value:null}init(i,n,l){let r,s=e.getElem(i,"all");if(s.length<1&&t("Elements not found"),this.id=l,this.option=e.deepMerge({},o.defaultOption,n),this.elements=[],this.option?.styles&&Object.keys(this.option.styles).length>0){let t=e.deepMerge({},this.option.styles);e.injectStylesheet(t,this.id)}return this.onChange=(e,t)=>{this.option.onChange&&this.option.onChange(e,t)},s.forEach(((o,i)=>{if("radio"!==o.type&&t("Element must be radio"),o.hasAttribute("data-radiobox"))return;o.setAttribute("data-radiobox","true"),r||(r=o.name),o.name!==r&&t("All radioboxes must belong to the same group");let n=o.nextElementSibling,l=o?.title||o?.dataset?.radioTitle,d=this.option.bindLabel,a=!1;n&&"LABEL"===n.tagName&&(l=(()=>{if(!e.isEmpty(o.id)){if(n.htmlFor===o.id)return d=a=!0,!0;if(n.dataset?.radioFor===o.id)return!0}return!(!o.dataset?.radioId||n.dataset?.radioFor!==o.dataset?.radioId)||null})(),!0===l&&(l=n.textContent,n.parentNode.removeChild(n))),(this.option.checked&&o?.value===this.option.checked||i===this.option?.checked)&&(s.forEach((e=>e!==o&&(e.checked=!1,e.removeAttribute("checked")))),o.checked=!0,o.setAttribute("checked","checked"));let c=e.getTemplate(this.id),h=document.createElement("div");h.innerHTML=c.trim();let u=e.getElem("label",h),p=o.cloneNode(!0);!0===a&&(u.htmlFor=o.id),u.parentNode.insertBefore(p,u),o.parentNode.replaceChild(h.firstElementChild,o),null===l?u.parentNode.removeChild(u):(u.textContent=l,d&&(u.classList.add("radio-labeled"),u.addEventListener("click",(e=>{e.preventDefault(),p.click()})))),p.addEventListener("change",(e=>{const t=e.target.checked;this.elements.forEach((t=>{t!==e.target&&t.removeAttribute("checked")})),e.target.setAttribute("checked",t?"checked":""),this.onChange(e,p)})),this.elements.push(p)})),this}empty(){return this.elements.forEach((e=>{e.checked=!1,e.removeAttribute("checked")})),this}destroy(){return this.elements.forEach((e=>{e.removeEventListener("change",this.onChange),e.removeEventListener("change",this.option.onChange)})),e.removeStylesheet(this.id),o.instance.splice(this.id,1),this}}return o.version="1.5.6",o.instance=[],o.defaultOption={checked:null,onChange:null,bindLabel:!0,styles:{}},o.destroyAll=()=>{o.instance.forEach(((e,t)=>{e.destroy()})),o.instance=[]},o}));
